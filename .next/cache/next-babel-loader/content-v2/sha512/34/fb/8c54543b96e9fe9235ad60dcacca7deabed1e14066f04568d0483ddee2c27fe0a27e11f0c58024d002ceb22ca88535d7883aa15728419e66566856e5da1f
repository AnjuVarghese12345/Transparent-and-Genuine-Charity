{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"E:/betterfund-crowdfunding-in-blockchain/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/betterfund-crowdfunding-in-blockchain/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"E:\\\\betterfund-crowdfunding-in-blockchain\\\\pages\\\\campaign\\\\[id]\\\\requests\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Head from \"next/head\";\nimport NextLink from \"next/link\";\nimport NextImage from \"next/image\";\nimport { useRouter } from \"next/router\";\nimport { getWEIPriceInUSD } from \"../../../../lib/getETHPrice\";\nimport { Heading, useBreakpointValue, useColorModeValue, Text, Button, Flex, Container, SimpleGrid, Box, Spacer, Table, Thead, Tbody, Tooltip, Tr, Th, Td, TableCaption, Skeleton, Alert, AlertIcon, AlertDescription, HStack, Stack, Link } from \"@chakra-ui/react\";\nimport { ArrowBackIcon, InfoIcon, CheckCircleIcon, WarningIcon } from \"@chakra-ui/icons\";\nimport web3 from \"../../../../smart-contract/web3\";\nimport Campaign from \"../../../../smart-contract/campaign\";\nimport factory from \"../../../../smart-contract/factory\";\n\nvar RequestRow = function RequestRow(_ref) {\n  _s();\n\n  var id = _ref.id,\n      request = _ref.request,\n      approversCount = _ref.approversCount,\n      campaignId = _ref.campaignId,\n      disabled = _ref.disabled,\n      ETHPrice = _ref.ETHPrice;\n  var router = useRouter();\n  var readyToFinalize = request.approvalCount > approversCount / 2;\n\n  var _useState = useState(),\n      errorMessageApprove = _useState[0],\n      setErrorMessageApprove = _useState[1];\n\n  var _useState2 = useState(false),\n      loadingApprove = _useState2[0],\n      setLoadingApprove = _useState2[1];\n\n  var _useState3 = useState(),\n      errorMessageFinalize = _useState3[0],\n      setErrorMessageFinalize = _useState3[1];\n\n  var _useState4 = useState(false),\n      loadingFinalize = _useState4[0],\n      setLoadingFinalize = _useState4[1];\n\n  var onApprove = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var campaign, accounts;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoadingApprove(true);\n              _context.prev = 1;\n              campaign = Campaign(campaignId);\n              _context.next = 5;\n              return web3.eth.getAccounts();\n\n            case 5:\n              accounts = _context.sent;\n              _context.next = 8;\n              return campaign.methods.approveRequest(id).send({\n                from: accounts[0]\n              });\n\n            case 8:\n              router.reload();\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              setErrorMessageApprove(_context.t0.message);\n\n            case 14:\n              _context.prev = 14;\n              setLoadingApprove(false);\n              return _context.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 11, 14, 17]]);\n    }));\n\n    return function onApprove() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onFinalize = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var campaign, accounts;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoadingFinalize(true);\n              _context2.prev = 1;\n              campaign = Campaign(campaignId);\n              _context2.next = 5;\n              return web3.eth.getAccounts();\n\n            case 5:\n              accounts = _context2.sent;\n              _context2.next = 8;\n              return campaign.methods.finalizeRequest(id).send({\n                from: accounts[0]\n              });\n\n            case 8:\n              router.reload();\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](1);\n              setErrorMessageFinalize(_context2.t0.message);\n\n            case 14:\n              _context2.prev = 14;\n              setLoadingFinalize(false);\n              return _context2.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 11, 14, 17]]);\n    }));\n\n    return function onFinalize() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(Tr, {\n    bg: readyToFinalize && !request.complete ? useColorModeValue(\"teal.100\", \"teal.700\") : useColorModeValue(\"gray.100\", \"gray.700\"),\n    opacity: request.complete ? \"0.4\" : \"1\",\n    children: [/*#__PURE__*/_jsxDEV(Td, {\n      children: [id, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Td, {\n      children: request.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Td, {\n      isNumeric: true,\n      children: [web3.utils.fromWei(request.value, \"ether\"), \"ETH ($\", getWEIPriceInUSD(ETHPrice, request.value), \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Td, {\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        color: \"teal.500\",\n        href: \"https://rinkeby.etherscan.io/address/\".concat(request.recipient),\n        isExternal: true,\n        children: [\" \", request.recipient.substr(0, 10) + \"...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Td, {\n      children: [request.approvalCount, \"/\", approversCount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Td, {\n      children: /*#__PURE__*/_jsxDEV(HStack, {\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          label: errorMessageApprove,\n          bg: useColorModeValue(\"white\", \"gray.700\"),\n          placement: \"top\",\n          color: useColorModeValue(\"gray.800\", \"white\"),\n          fontSize: \"1em\",\n          children: /*#__PURE__*/_jsxDEV(WarningIcon, {\n            color: useColorModeValue(\"red.600\", \"red.300\"),\n            display: errorMessageApprove ? \"inline-block\" : \"none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, _this), request.complete ? /*#__PURE__*/_jsxDEV(Tooltip, {\n          label: \"This Request has been finalized & withdrawn to the recipient,it may then have less no of approvers\",\n          bg: useColorModeValue(\"white\", \"gray.700\"),\n          placement: \"top\",\n          color: useColorModeValue(\"gray.800\", \"white\"),\n          fontSize: \"1em\",\n          children: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n            color: useColorModeValue(\"green.600\", \"green.300\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, _this) : /*#__PURE__*/_jsxDEV(Button, {\n          colorScheme: \"yellow\",\n          variant: \"outline\",\n          _hover: {\n            bg: \"yellow.600\",\n            color: \"white\"\n          },\n          onClick: onApprove,\n          isDisabled: disabled || request.approvalCount == approversCount,\n          isLoading: loadingApprove,\n          children: \"Approve\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Td, {\n      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n        label: errorMessageFinalize,\n        bg: useColorModeValue(\"white\", \"gray.700\"),\n        placement: \"top\",\n        color: useColorModeValue(\"gray.800\", \"white\"),\n        fontSize: \"1em\",\n        children: /*#__PURE__*/_jsxDEV(WarningIcon, {\n          color: useColorModeValue(\"red.600\", \"red.300\"),\n          display: errorMessageFinalize ? \"inline-block\" : \"none\",\n          mr: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, _this), request.complete ? /*#__PURE__*/_jsxDEV(Tooltip, {\n        label: \"This Request has been finalized & withdrawn to the recipient,it may then have less no of approvers\",\n        bg: useColorModeValue(\"white\", \"gray.700\"),\n        placement: \"top\",\n        color: useColorModeValue(\"gray.800\", \"white\"),\n        fontSize: \"1em\",\n        children: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n          color: useColorModeValue(\"green.600\", \"green.300\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(HStack, {\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          colorScheme: \"green\",\n          variant: \"outline\",\n          _hover: {\n            bg: \"green.600\",\n            color: \"white\"\n          },\n          isDisabled: disabled || !request.complete && !readyToFinalize,\n          onClick: onFinalize,\n          isLoading: loadingFinalize,\n          children: \"Finalize\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          label: \"This Request is ready to be Finalized because it has been approved by 50% Approvers\",\n          bg: useColorModeValue(\"white\", \"gray.700\"),\n          placement: \"top\",\n          color: useColorModeValue(\"gray.800\", \"white\"),\n          fontSize: \"1.2em\",\n          children: /*#__PURE__*/_jsxDEV(InfoIcon, {\n            as: \"span\",\n            color: useColorModeValue(\"teal.800\", \"white\"),\n            display: readyToFinalize && !request.complete ? \"inline-block\" : \"none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(RequestRow, \"PEvv5Qz/6HDxraYgMIi1KQDobY0=\", false, function () {\n  return [useRouter, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue, useColorModeValue];\n});\n\n_c = RequestRow;\nexport var __N_SSP = true;\nexport default function Requests(_ref4) {\n  _s2();\n\n  var _this2 = this;\n\n  var campaignId = _ref4.campaignId,\n      requestCount = _ref4.requestCount,\n      approversCount = _ref4.approversCount,\n      balance = _ref4.balance,\n      name = _ref4.name,\n      ETHPrice = _ref4.ETHPrice;\n\n  var _useState5 = useState([]),\n      requestsList = _useState5[0],\n      setRequestsList = _useState5[1];\n\n  var _useState6 = useState(true),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var _useState7 = useState(false),\n      FundNotAvailable = _useState7[0],\n      setFundNotAvailable = _useState7[1];\n\n  var campaign = Campaign(campaignId);\n\n  function getRequests() {\n    return _getRequests.apply(this, arguments);\n  }\n\n  function _getRequests() {\n    _getRequests = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var requests;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return Promise.all(Array(parseInt(requestCount)).fill().map(function (element, index) {\n                return campaign.methods.requests(index).call();\n              }));\n\n            case 3:\n              requests = _context3.sent;\n              console.log(\"requests\", requests);\n              setRequestsList(requests);\n              setIsLoading(false);\n              return _context3.abrupt(\"return\", requests);\n\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0);\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 10]]);\n    }));\n    return _getRequests.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    if (balance == 0) {\n      setFundNotAvailable(true);\n    }\n\n    getRequests();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Campaign Withdrawal Requests\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: \"Create a Withdrawal Request\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/logo.svg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        px: {\n          base: \"4\",\n          md: \"12\"\n        },\n        maxW: \"7xl\",\n        align: \"left\",\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          flexDirection: {\n            base: \"column\",\n            md: \"row\"\n          },\n          py: 4,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            py: \"4\",\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              fontSize: \"lg\",\n              color: \"teal.400\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowBackIcon, {\n                mr: 2\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(NextLink, {\n                href: \"/campaign/\".concat(campaignId),\n                children: \"Back to Campaign\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            py: \"4\",\n            children: [\"Campaign Balance :\", \" \", /*#__PURE__*/_jsxDEV(Text, {\n              as: \"span\",\n              fontWeight: \"bold\",\n              fontSize: \"lg\",\n              children: balance > 0 ? web3.utils.fromWei(balance, \"ether\") : \"0, Become a Donor ðŸ˜„\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              as: \"span\",\n              display: balance > 0 ? \"inline\" : \"none\",\n              pr: 2,\n              fontWeight: \"bold\",\n              fontSize: \"lg\",\n              children: [\" \", \"ETH\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              as: \"span\",\n              display: balance > 0 ? \"inline\" : \"none\",\n              fontWeight: \"normal\",\n              color: useColorModeValue(\"gray.500\", \"gray.200\"),\n              children: [\"($\", getWEIPriceInUSD(ETHPrice, balance), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), FundNotAvailable ? /*#__PURE__*/_jsxDEV(Alert, {\n          status: \"error\",\n          my: 4,\n          children: [/*#__PURE__*/_jsxDEV(AlertIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(AlertDescription, {\n            children: \"The Current Balance of the Campaign is 0, Please Contribute to approve and finalize Requests.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), requestsList.length > 0 ? /*#__PURE__*/_jsxDEV(Container, {\n        px: {\n          base: \"4\",\n          md: \"12\"\n        },\n        maxW: \"7xl\",\n        align: \"left\",\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          flexDirection: {\n            base: \"column\",\n            lg: \"row\"\n          },\n          py: 4,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            py: \"2\",\n            pr: \"2\",\n            children: /*#__PURE__*/_jsxDEV(Heading, {\n              textAlign: useBreakpointValue({\n                base: \"left\"\n              }),\n              fontFamily: \"heading\",\n              color: useColorModeValue(\"gray.800\", \"white\"),\n              as: \"h3\",\n              isTruncated: true,\n              maxW: \"3xl\",\n              children: [\"Withdrawal Requests for \", name, \" Campaign\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            py: \"2\",\n            children: /*#__PURE__*/_jsxDEV(NextLink, {\n              href: \"/campaign/\".concat(campaignId, \"/requests/new\"),\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                display: {\n                  sm: \"inline-flex\"\n                },\n                justify: \"flex-end\",\n                fontSize: \"md\",\n                fontWeight: 600,\n                color: \"white\",\n                bg: \"teal.400\",\n                href: \"#\",\n                _hover: {\n                  bg: \"teal.300\"\n                },\n                children: \"Add Withdrawal Request\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), \" \", /*#__PURE__*/_jsxDEV(Box, {\n          overflowX: \"auto\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            children: [/*#__PURE__*/_jsxDEV(Thead, {\n              children: /*#__PURE__*/_jsxDEV(Tr, {\n                children: [/*#__PURE__*/_jsxDEV(Th, {\n                  children: \"ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 379,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Th, {\n                  w: \"30%\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Th, {\n                  isNumeric: true,\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Th, {\n                  maxW: \"12%\",\n                  isTruncated: true,\n                  children: \"Recipient Wallet Address\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Th, {\n                  children: \"Approval Count \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Th, {\n                  children: \"Approve \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Th, {\n                  children: \"Finalize \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tbody, {\n              children: requestsList.map(function (request, index) {\n                return /*#__PURE__*/_jsxDEV(RequestRow, {\n                  id: index,\n                  request: request,\n                  approversCount: approversCount,\n                  campaignId: campaignId,\n                  disabled: FundNotAvailable,\n                  ETHPrice: ETHPrice\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 23\n                }, _this2);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCaption, {\n              textAlign: \"left\",\n              ml: \"-2\",\n              children: [\"Found \", requestCount, \" Requests\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Container, {\n          px: {\n            base: \"4\",\n            md: \"12\"\n          },\n          maxW: \"7xl\",\n          align: \"left\",\n          display: isLoading ? \"block\" : \"none\",\n          children: /*#__PURE__*/_jsxDEV(SimpleGrid, {\n            rows: {\n              base: 3\n            },\n            spacing: 2,\n            children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n              height: \"2rem\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n              height: \"5rem\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n              height: \"5rem\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n              height: \"5rem\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          maxW: \"lg\",\n          align: \"center\",\n          display: requestsList.length === 0 && !isLoading ? \"block\" : \"none\",\n          children: /*#__PURE__*/_jsxDEV(SimpleGrid, {\n            row: true,\n            spacing: 2,\n            align: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(Stack, {\n              align: \"center\",\n              children: /*#__PURE__*/_jsxDEV(NextImage, {\n                src: \"/static/no-requests.png\",\n                alt: \"no-request\",\n                width: \"150\",\n                height: \"150\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Heading, {\n              textAlign: \"center\",\n              color: useColorModeValue(\"gray.800\", \"white\"),\n              as: \"h4\",\n              size: \"md\",\n              children: [\"No Requests yet for \", name, \" Campaign\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              textAlign: useBreakpointValue({\n                base: \"center\"\n              }),\n              color: useColorModeValue(\"gray.600\", \"gray.300\"),\n              fontSize: \"sm\",\n              children: \"Create a Withdrawal Request to Withdraw funds from the Campaign\\uD83D\\uDE04\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              fontSize: \"md\",\n              fontWeight: 600,\n              color: \"white\",\n              bg: \"teal.400\",\n              _hover: {\n                bg: \"teal.300\"\n              },\n              children: /*#__PURE__*/_jsxDEV(NextLink, {\n                href: \"/campaign/\".concat(campaignId, \"/requests/new\"),\n                children: \"Create Withdrawal Request\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              fontSize: \"md\",\n              fontWeight: 600,\n              color: \"white\",\n              bg: \"gray.400\",\n              _hover: {\n                bg: \"gray.300\"\n              },\n              children: /*#__PURE__*/_jsxDEV(NextLink, {\n                href: \"/campaign/\".concat(campaignId, \"/\"),\n                children: \"Go to Campaign\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Requests, \"CuF1LsiFpKHuYw0ada6RgsZB+DM=\", false, function () {\n  return [useColorModeValue, useBreakpointValue, useColorModeValue, useColorModeValue, useBreakpointValue, useColorModeValue];\n});\n\n_c2 = Requests;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RequestRow\");\n$RefreshReg$(_c2, \"Requests\");","map":{"version":3,"sources":["E:/betterfund-crowdfunding-in-blockchain/pages/campaign/[id]/requests/index.js"],"names":["React","useState","useEffect","Head","NextLink","NextImage","useRouter","getWEIPriceInUSD","Heading","useBreakpointValue","useColorModeValue","Text","Button","Flex","Container","SimpleGrid","Box","Spacer","Table","Thead","Tbody","Tooltip","Tr","Th","Td","TableCaption","Skeleton","Alert","AlertIcon","AlertDescription","HStack","Stack","Link","ArrowBackIcon","InfoIcon","CheckCircleIcon","WarningIcon","web3","Campaign","factory","RequestRow","id","request","approversCount","campaignId","disabled","ETHPrice","router","readyToFinalize","approvalCount","errorMessageApprove","setErrorMessageApprove","loadingApprove","setLoadingApprove","errorMessageFinalize","setErrorMessageFinalize","loadingFinalize","setLoadingFinalize","onApprove","campaign","eth","getAccounts","accounts","methods","approveRequest","send","from","reload","message","onFinalize","finalizeRequest","complete","description","utils","fromWei","value","recipient","substr","bg","color","Requests","requestCount","balance","name","requestsList","setRequestsList","isLoading","setIsLoading","FundNotAvailable","setFundNotAvailable","getRequests","Promise","all","Array","parseInt","fill","map","element","index","requests","call","console","log","base","md","length","lg","sm"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Head from \"next/head\";\r\nimport NextLink from \"next/link\";\r\nimport NextImage from \"next/image\";\r\nimport { useRouter } from \"next/router\";\r\nimport { getETHPrice, getWEIPriceInUSD } from \"../../../../lib/getETHPrice\";\r\nimport {\r\n  Heading,\r\n  useBreakpointValue,\r\n  useColorModeValue,\r\n  Text,\r\n  Button,\r\n  Flex,\r\n  Container,\r\n  SimpleGrid,\r\n  Box,\r\n  Spacer,\r\n  Table,\r\n  Thead,\r\n  Tbody,\r\n  Tooltip,\r\n  Tr,\r\n  Th,\r\n  Td,\r\n  TableCaption,\r\n  Skeleton,\r\n  Alert,\r\n  AlertIcon,\r\n  AlertDescription,\r\n  HStack,\r\n  Stack,\r\n  Link,\r\n} from \"@chakra-ui/react\";\r\nimport {\r\n  ArrowBackIcon,\r\n  InfoIcon,\r\n  CheckCircleIcon,\r\n  WarningIcon,\r\n} from \"@chakra-ui/icons\";\r\nimport web3 from \"../../../../smart-contract/web3\";\r\nimport Campaign from \"../../../../smart-contract/campaign\";\r\nimport factory from \"../../../../smart-contract/factory\";\r\n\r\nexport async function getServerSideProps({ params }) {\r\n  const campaignId = params.id;\r\n  const campaign = Campaign(campaignId);\r\n  const requestCount = await campaign.methods.getRequestsCount().call();\r\n  const approversCount = await campaign.methods.approversCount().call();\r\n  const summary = await campaign.methods.getSummary().call();\r\n  const ETHPrice = await getETHPrice();\r\n\r\n  return {\r\n    props: {\r\n      campaignId,\r\n      requestCount,\r\n      approversCount,\r\n      balance: summary[1],\r\n      name: summary[5],\r\n      ETHPrice,\r\n    },\r\n  };\r\n}\r\n\r\nconst RequestRow = ({\r\n  id,\r\n  request,\r\n  approversCount,\r\n  campaignId,\r\n  disabled,\r\n  ETHPrice,\r\n}) => {\r\n  const router = useRouter();\r\n  const readyToFinalize = request.approvalCount > approversCount / 2;\r\n  const [errorMessageApprove, setErrorMessageApprove] = useState();\r\n  const [loadingApprove, setLoadingApprove] = useState(false);\r\n  const [errorMessageFinalize, setErrorMessageFinalize] = useState();\r\n  const [loadingFinalize, setLoadingFinalize] = useState(false);\r\n  const onApprove = async () => {\r\n    setLoadingApprove(true);\r\n    try {\r\n      const campaign = Campaign(campaignId);\r\n      const accounts = await web3.eth.getAccounts();\r\n      await campaign.methods.approveRequest(id).send({\r\n        from: accounts[0],\r\n      });\r\n      router.reload();\r\n    } catch (err) {\r\n      setErrorMessageApprove(err.message);\r\n    } finally {\r\n      setLoadingApprove(false);\r\n    }\r\n  };\r\n\r\n  const onFinalize = async () => {\r\n    setLoadingFinalize(true);\r\n    try {\r\n      const campaign = Campaign(campaignId);\r\n      const accounts = await web3.eth.getAccounts();\r\n      await campaign.methods.finalizeRequest(id).send({\r\n        from: accounts[0],\r\n      });\r\n      router.reload();\r\n    } catch (err) {\r\n      setErrorMessageFinalize(err.message);\r\n    } finally {\r\n      setLoadingFinalize(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Tr\r\n      bg={\r\n        readyToFinalize && !request.complete\r\n          ? useColorModeValue(\"teal.100\", \"teal.700\")\r\n          : useColorModeValue(\"gray.100\", \"gray.700\")\r\n      }\r\n      opacity={request.complete ? \"0.4\" : \"1\"}\r\n    >\r\n      <Td>{id} </Td>\r\n      <Td>{request.description}</Td>\r\n      <Td isNumeric>\r\n        {web3.utils.fromWei(request.value, \"ether\")}ETH ($\r\n        {getWEIPriceInUSD(ETHPrice, request.value)})\r\n      </Td>\r\n      <Td>\r\n        <Link\r\n          color=\"teal.500\"\r\n          href={`https://rinkeby.etherscan.io/address/${request.recipient}`}\r\n          isExternal\r\n        >\r\n          {\" \"}\r\n          {request.recipient.substr(0, 10) + \"...\"}\r\n        </Link>\r\n      </Td>\r\n      <Td>\r\n        {request.approvalCount}/{approversCount}\r\n      </Td>\r\n      <Td>\r\n        <HStack spacing={2}>\r\n          <Tooltip\r\n            label={errorMessageApprove}\r\n            bg={useColorModeValue(\"white\", \"gray.700\")}\r\n            placement={\"top\"}\r\n            color={useColorModeValue(\"gray.800\", \"white\")}\r\n            fontSize={\"1em\"}\r\n          >\r\n            <WarningIcon\r\n              color={useColorModeValue(\"red.600\", \"red.300\")}\r\n              display={errorMessageApprove ? \"inline-block\" : \"none\"}\r\n            />\r\n          </Tooltip>\r\n          {request.complete ? (\r\n            <Tooltip\r\n              label=\"This Request has been finalized & withdrawn to the recipient,it may then have less no of approvers\"\r\n              bg={useColorModeValue(\"white\", \"gray.700\")}\r\n              placement={\"top\"}\r\n              color={useColorModeValue(\"gray.800\", \"white\")}\r\n              fontSize={\"1em\"}\r\n            >\r\n              <CheckCircleIcon\r\n                color={useColorModeValue(\"green.600\", \"green.300\")}\r\n              />\r\n            </Tooltip>\r\n          ) : (\r\n            <Button\r\n              colorScheme=\"yellow\"\r\n              variant=\"outline\"\r\n              _hover={{\r\n                bg: \"yellow.600\",\r\n                color: \"white\",\r\n              }}\r\n              onClick={onApprove}\r\n              isDisabled={disabled || request.approvalCount == approversCount}\r\n              isLoading={loadingApprove}\r\n            >\r\n              Approve\r\n            </Button>\r\n          )}\r\n        </HStack>\r\n      </Td>\r\n      <Td>\r\n        <Tooltip\r\n          label={errorMessageFinalize}\r\n          bg={useColorModeValue(\"white\", \"gray.700\")}\r\n          placement={\"top\"}\r\n          color={useColorModeValue(\"gray.800\", \"white\")}\r\n          fontSize={\"1em\"}\r\n        >\r\n          <WarningIcon\r\n            color={useColorModeValue(\"red.600\", \"red.300\")}\r\n            display={errorMessageFinalize ? \"inline-block\" : \"none\"}\r\n            mr=\"2\"\r\n          />\r\n        </Tooltip>\r\n        {request.complete ? (\r\n          <Tooltip\r\n              label=\"This Request has been finalized & withdrawn to the recipient,it may then have less no of approvers\"\r\n            bg={useColorModeValue(\"white\", \"gray.700\")}\r\n            placement={\"top\"}\r\n            color={useColorModeValue(\"gray.800\", \"white\")}\r\n            fontSize={\"1em\"}\r\n          >\r\n            <CheckCircleIcon\r\n              color={useColorModeValue(\"green.600\", \"green.300\")}\r\n            />\r\n          </Tooltip>\r\n        ) : (\r\n          <HStack spacing={2}>\r\n            <Button\r\n              colorScheme=\"green\"\r\n              variant=\"outline\"\r\n              _hover={{\r\n                bg: \"green.600\",\r\n                color: \"white\",\r\n              }}\r\n              isDisabled={disabled || (!request.complete && !readyToFinalize)}\r\n              onClick={onFinalize}\r\n              isLoading={loadingFinalize}\r\n            >\r\n              Finalize\r\n            </Button>\r\n\r\n            <Tooltip\r\n              label=\"This Request is ready to be Finalized because it has been approved by 50% Approvers\"\r\n              bg={useColorModeValue(\"white\", \"gray.700\")}\r\n              placement={\"top\"}\r\n              color={useColorModeValue(\"gray.800\", \"white\")}\r\n              fontSize={\"1.2em\"}\r\n            >\r\n              <InfoIcon\r\n                as=\"span\"\r\n                color={useColorModeValue(\"teal.800\", \"white\")}\r\n                display={\r\n                  readyToFinalize && !request.complete ? \"inline-block\" : \"none\"\r\n                }\r\n              />\r\n            </Tooltip>\r\n          </HStack>\r\n        )}\r\n      </Td>\r\n    </Tr>\r\n  );\r\n};\r\n\r\nexport default function Requests({\r\n  campaignId,\r\n  requestCount,\r\n  approversCount,\r\n  balance,\r\n  name,\r\n  ETHPrice,\r\n}) {\r\n  const [requestsList, setRequestsList] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [FundNotAvailable, setFundNotAvailable] = useState(false);\r\n  const campaign = Campaign(campaignId);\r\n  async function getRequests() {\r\n    try {\r\n      const requests = await Promise.all(\r\n        Array(parseInt(requestCount))\r\n          .fill()\r\n          .map((element, index) => {\r\n            return campaign.methods.requests(index).call();\r\n          })\r\n      );\r\n\r\n      console.log(\"requests\", requests);\r\n      setRequestsList(requests);\r\n      setIsLoading(false);\r\n      return requests;\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (balance == 0) {\r\n      setFundNotAvailable(true);\r\n    }\r\n    getRequests();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Head>\r\n        <title>Campaign Withdrawal Requests</title>\r\n        <meta name=\"description\" content=\"Create a Withdrawal Request\" />\r\n        <link rel=\"icon\" href=\"/logo.svg\" />\r\n      </Head>\r\n\r\n      <main>\r\n        <Container px={{ base: \"4\", md: \"12\" }} maxW={\"7xl\"} align={\"left\"}>\r\n          <Flex flexDirection={{ base: \"column\", md: \"row\" }} py={4}>\r\n            <Box py=\"4\">\r\n              <Text fontSize={\"lg\"} color={\"teal.400\"}>\r\n                <ArrowBackIcon mr={2} />\r\n                <NextLink href={`/campaign/${campaignId}`}>\r\n                  Back to Campaign\r\n                </NextLink>\r\n              </Text>\r\n            </Box>\r\n            <Spacer />\r\n            <Box py=\"4\">\r\n              Campaign Balance :{\" \"}\r\n              <Text as=\"span\" fontWeight={\"bold\"} fontSize=\"lg\">\r\n                {balance > 0\r\n                  ? web3.utils.fromWei(balance, \"ether\")\r\n                  : \"0, Become a Donor ðŸ˜„\"}\r\n              </Text>\r\n              <Text\r\n                as=\"span\"\r\n                display={balance > 0 ? \"inline\" : \"none\"}\r\n                pr={2}\r\n                fontWeight={\"bold\"}\r\n                fontSize=\"lg\"\r\n              >\r\n                {\" \"}\r\n                ETH\r\n              </Text>\r\n              <Text\r\n                as=\"span\"\r\n                display={balance > 0 ? \"inline\" : \"none\"}\r\n                fontWeight={\"normal\"}\r\n                color={useColorModeValue(\"gray.500\", \"gray.200\")}\r\n              >\r\n                (${getWEIPriceInUSD(ETHPrice, balance)})\r\n              </Text>\r\n            </Box>\r\n          </Flex>\r\n          {FundNotAvailable ? (\r\n            <Alert status=\"error\" my={4}>\r\n              <AlertIcon />\r\n              <AlertDescription>\r\n                The Current Balance of the Campaign is 0, Please Contribute to\r\n                approve and finalize Requests.\r\n              </AlertDescription>\r\n            </Alert>\r\n          ) : null}\r\n        </Container>\r\n        {requestsList.length > 0 ? (\r\n          <Container px={{ base: \"4\", md: \"12\" }} maxW={\"7xl\"} align={\"left\"}>\r\n            <Flex flexDirection={{ base: \"column\", lg: \"row\" }} py={4}>\r\n              <Box py=\"2\" pr=\"2\">\r\n                <Heading\r\n                  textAlign={useBreakpointValue({ base: \"left\" })}\r\n                  fontFamily={\"heading\"}\r\n                  color={useColorModeValue(\"gray.800\", \"white\")}\r\n                  as=\"h3\"\r\n                  isTruncated\r\n                  maxW={\"3xl\"}\r\n                >\r\n                  Withdrawal Requests for {name} Campaign\r\n                </Heading>\r\n              </Box>\r\n              <Spacer />\r\n              <Box py=\"2\">\r\n                <NextLink href={`/campaign/${campaignId}/requests/new`}>\r\n                  <Button\r\n                    display={{ sm: \"inline-flex\" }}\r\n                    justify={\"flex-end\"}\r\n                    fontSize={\"md\"}\r\n                    fontWeight={600}\r\n                    color={\"white\"}\r\n                    bg={\"teal.400\"}\r\n                    href={\"#\"}\r\n                    _hover={{\r\n                      bg: \"teal.300\",\r\n                    }}\r\n                  >\r\n                    Add Withdrawal Request\r\n                  </Button>\r\n                </NextLink>\r\n              </Box>\r\n            </Flex>{\" \"}\r\n            <Box overflowX=\"auto\">\r\n              <Table>\r\n                <Thead>\r\n                  <Tr>\r\n                    <Th>ID</Th>\r\n                    <Th w=\"30%\">Description</Th>\r\n                    <Th isNumeric>Amount</Th>\r\n                    <Th maxW=\"12%\" isTruncated>\r\n                      Recipient Wallet Address\r\n                    </Th>\r\n                    <Th>Approval Count </Th>\r\n                    <Th>Approve </Th>\r\n                    <Th>Finalize </Th>\r\n                  </Tr>\r\n                </Thead>\r\n                <Tbody>\r\n                  {requestsList.map((request, index) => {\r\n                    return (\r\n                      <RequestRow\r\n                        key={index}\r\n                        id={index}\r\n                        request={request}\r\n                        approversCount={approversCount}\r\n                        campaignId={campaignId}\r\n                        disabled={FundNotAvailable}\r\n                        ETHPrice={ETHPrice}\r\n                      />\r\n                    );\r\n                  })}\r\n                </Tbody>\r\n                <TableCaption textAlign=\"left\" ml=\"-2\">\r\n                  Found {requestCount} Requests\r\n                </TableCaption>\r\n              </Table>\r\n            </Box>\r\n          </Container>\r\n        ) : (\r\n          <div>\r\n            <Container\r\n              px={{ base: \"4\", md: \"12\" }}\r\n              maxW={\"7xl\"}\r\n              align={\"left\"}\r\n              display={isLoading ? \"block\" : \"none\"}\r\n            >\r\n              <SimpleGrid rows={{ base: 3 }} spacing={2}>\r\n                <Skeleton height=\"2rem\" />\r\n                <Skeleton height=\"5rem\" />\r\n                <Skeleton height=\"5rem\" />\r\n                <Skeleton height=\"5rem\" />\r\n              </SimpleGrid>\r\n            </Container>\r\n            <Container\r\n              maxW={\"lg\"}\r\n              align={\"center\"}\r\n              display={\r\n                requestsList.length === 0 && !isLoading ? \"block\" : \"none\"\r\n              }\r\n            >\r\n              <SimpleGrid row spacing={2} align=\"center\">\r\n                <Stack align=\"center\">\r\n                  <NextImage\r\n                    src=\"/static/no-requests.png\"\r\n                    alt=\"no-request\"\r\n                    width=\"150\"\r\n                    height=\"150\"\r\n                  />\r\n                </Stack>\r\n                <Heading\r\n                  textAlign={\"center\"}\r\n                  color={useColorModeValue(\"gray.800\", \"white\")}\r\n                  as=\"h4\"\r\n                  size=\"md\"\r\n                >\r\n                  No Requests yet for {name} Campaign\r\n                </Heading>\r\n                <Text\r\n                  textAlign={useBreakpointValue({ base: \"center\" })}\r\n                  color={useColorModeValue(\"gray.600\", \"gray.300\")}\r\n                  fontSize=\"sm\"\r\n                >\r\n                  Create a Withdrawal Request to Withdraw funds from the\r\n                  CampaignðŸ˜„\r\n                </Text>\r\n\r\n                <Button\r\n                  fontSize={\"md\"}\r\n                  fontWeight={600}\r\n                  color={\"white\"}\r\n                  bg={\"teal.400\"}\r\n                  _hover={{\r\n                    bg: \"teal.300\",\r\n                  }}\r\n                >\r\n                  <NextLink href={`/campaign/${campaignId}/requests/new`}>\r\n                    Create Withdrawal Request\r\n                  </NextLink>\r\n                </Button>\r\n\r\n                <Button\r\n                  fontSize={\"md\"}\r\n                  fontWeight={600}\r\n                  color={\"white\"}\r\n                  bg={\"gray.400\"}\r\n                  _hover={{\r\n                    bg: \"gray.300\",\r\n                  }}\r\n                >\r\n                  <NextLink href={`/campaign/${campaignId}/`}>\r\n                    Go to Campaign\r\n                  </NextLink>\r\n                </Button>\r\n              </SimpleGrid>\r\n            </Container>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}